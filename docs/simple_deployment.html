<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>zanePerfor性能监控统计平台</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		*{margin:0;padding:0;}
		a{color:rgb(135, 118, 247);text-decoration: none;}
		.body{font-size:16px;}
		.header {width:100%;overflow:hidden;margin:0 auto;height:60px;line-height:60px;position: fixed;left:0;top:0;background:#fff;border-bottom:solid 1px #ddd;}
		.inlin-block{display:inline-block;}
		.header .logo{font-size:25px;display:flex;align-items: center;flex-direction: row;width:150px;float:left;margin-left:20px;}
		.header .logo img{width:40px;height:auto;margin-right:10px;}
		.header .right{float:right;text-decoration: none;color:#333;}
		.header .desc{color:#999;margin-left:50px;font-size:13px;}
		.main{border-top:solid 1px #ddd;}
		.side{width:180px;height:100%;padding:20px;border-right:solid 1px #ddd;font-size:14px;position:fixed;left:0;top:60px;}
		.side a{color:#333;text-decoration: none;}
		.side .item{margin-bottom:15px;}
		.side .item.active a{color:rgb(135, 118, 247);}
		.content{overflow:hidden;margin-left:230px;margin-top:60px;padding:30px 30px 100px 130px;max-width:1200px;}
		h1{font-size:30px;}
		h2{font-size:20px;border-bottom:solid 1px #ddd;padding-bottom:10px;}
		h3{font-size:16px;font-weight:bold;}
		p{font-size:14px;line-height:35px;}
		strong{font-weight:bold;font-size:16px;}
		blockquote {padding: 0 10px;color: #777;border-left: 5px solid #ddd;}
		.mt10{margin-top:10px;}
		.mt20{margin-top:20px;}
		.mt30{margin-top:30px;}
		.mr20{margin-right:20px;}
		.mb10{margin-bottom:10px;}
		.mb20{margin-bottom:20px;}
		.mb30{margin-bottom:30px;}
		ul li {list-style: none;font-size:14px;line-height:35px;display:flex;flex-direction: row;align-items: center;}
		ul li:before{content:'';display:inline-block;width:5px;height:5px;border-radius:100%;background:#ccc;margin-right:8px;}
		.red{color:red;}
		.toggle_slide{display:none;}
		img{max-width:100%;}
		@media (max-width: 768px) {
			.toggle_slide{display:block;width:60px;height:60px;text-align:center;float:left;cursor: pointer;}
			.toggle_slide img{width:40px;height:40px;margin-top:10px;}
			.side{display: none;background:#fff;top:61px;}
			.content{margin-left: 0px;padding: 30px 20px 100px 20px;}
			.header .logo{margin-left:0;}
			.header .desc{display:none;}
			.header .right{margin-right:8px;font-size:14px;}
		}
	</style>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-okaidia.css" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/prism.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-javascript.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js"></script>
	<script>$(function () { $(".toggle_slide").click(function () { if ($(".side").css("display") == 'block') { $(".side").css("display", "none"); } else { $(".side").css("display", "block"); } }); })</script>
	</head>
<body>
	<div class="header">
		<div class="toggle_slide"><img src="https://cdn.seosiwei.com/Sb4GfHisSa5Wsbka2anshJjhTmsTBrCK.png?imageslim"></div>
		<div class="inlin-block logo">
			<img src="https://img.allpyra.com/d5d9737d-8111-4c1e-8f03-0913ec1b2c51.png" alt="logo">
			<div>zanePerfor</div>
		</div>
		<div class="inlin-block desc">前端性能监控业务平台</div>
		<a class="right mr20" target="_blank" href="https://github.com/wangweianger/zanePerfor">GITHUB地址</a>
		<a class="right mr20" target="_blank" href="https://blog.seosiwei.com/">我的博客</a>
	</div>
	<div class="main">
		<div class="side">
			<div class="item active" data-mark="index"><a href="/performance/index.html">zanePerfor是什么?</a></div>
			<div class="item" data-mark="project"><a href="/performance/project.html">项目服务架构</a></div>
			<div class="item" data-mark="SDK"><a href="/performance/SDK.html">上报SDK</a></div>
			<div class="item" data-mark="simple_deployment"><a href="/performance/simple_deployment.html">快速部署入门体验</a></div>
			<div class="item" data-mark="configs"><a href="/performance/configs.html">项目配置说明</a></div>
			<div class="item" data-mark="tasks"><a href="/performance/tasks.html">定时任务说明</a></div>
			<div class="item" data-mark="repeart_task"><a href="/performance/repeart_task.html">集群定时任务避免重复执行</a></div>
			<div class="item" data-mark="iptask"><a href="/performance/iptask.html">IP解析地址性能说明</a></div>
			<div class="item" data-mark="oneservers"><a href="/performance/oneservers.html">单机部署服务稳定说明</a></div>
			<div class="item" data-mark="github"><a href="/performance/github.html">github OAuth</a></div>
			<div class="item"><a href="/performance/wait.html">redis集群搭建</a></div>
			<div class="item"><a href="/performance/wait.html">Mongodb索引优化</a></div>
			<div class="item" data-mark="replica_set"><a href="/performance/replica_set.html">Mongodb副本集读写分离</a></div>
			<div class="item" data-mark="colony"><a href="/performance/colony.html">Mongodb集群分片</a></div>
			<div class="item"><a href="/performance/wait.html">servers(负载均衡)</a></div>
			<div class="item"><a href="/performance/wait.html">消息队列升级改造</a></div>
			<div class="item"><a href="/performance/wait.html">未来规划</a></div>
		</div>
		<div class="content">
			<h1 class="mb20">单机部署入门体验</h1>
			<h2 class="">一：安装Mongodb数据库</h2>
			<blockquote class="mt10">
				<p>提示：安装Mongodb的教程网上非常之多，我这里也不重复的编写，直接推荐几篇文章</p>
			</blockquote>
			<p class="mt10"><strong>菜鸟教程：</strong><a target="_blank" href="http://www.runoob.com/mongodb/mongodb-osx-install.html"><strong>http://www.runoob.com/mongodb/mongodb-osx-install.html</strong></a></p>
			<p><strong>Mongodb官网：</strong><a target="_blank" href="https://docs.mongodb.com/manual/administration/install-enterprise/"><strong>https://docs.mongodb.com/manual/administration/install-enterprise/</strong></a></p>
			<p><strong>Mongo中文社区：</strong><a target="_blank" href="http://www.mongoing.com/docs/administration/install-community.html"><strong>http://www.mongoing.com/docs/administration/install-community.html</strong></a></p>
			<p class="mt10">Mongodb可视化工具推荐Robomongo,非常好用！</p>
			<p><strong>Robomongo：</strong><a target="_blank" href="https://robomongo.org/download"><strong>https://robomongo.org/download</strong></a></p>
			<h2 class="mt10">参考：一份最基础的Mongodb配置</h2>
			<pre><code class="language-javascript">
processManagement:
	fork: true
systemLog:
	destination: file
	path: /usr/local/var/log/mongodb/mongo27017.log
	logAppend: true
storage:
	dbPath: /Users/MacBook/mongodb/mongodb27017
net:
	bindIp: 127.0.0.1
	port: 27017
</code></pre>
			<p class="mt10"><strong>Mongodb各项配置含义参考链接：</strong></p>
			<p><strong>官网Config：</strong><a target="_blank" href="https://docs.mongodb.com/manual/reference/configuration-options/index.html"><strong>https://docs.mongodb.com/manual/reference/configuration-options/index.html</strong></a></p>
			<p><strong>会煮咖啡的猫咪：</strong><a target="_blank" href="https://www.jianshu.com/p/f9f1454f251f"><strong>https://www.jianshu.com/p/f9f1454f251f</strong></a></p>
			<h2 class="mt30">二：安装Redis数据库</h2>
			<blockquote class="mt10">
				<p>提示：安装Redis的教程网上也非常之多，以下链接可参考</p>
			</blockquote>
			<p class="mt10"><strong>菜鸟教程：</strong><a target="_blank" href="http://www.runoob.com/redis/redis-install.html"><strong>http://www.runoob.com/redis/redis-install.html</strong></a></p>
			<p><strong>Redis中文网：</strong><a target="_blank" href="http://www.redis.net.cn/tutorial/3503.html"><strong>http://www.redis.net.cn/tutorial/3503.html</strong></a></p>
			<p class="mt10">Redis可视化工具推荐Redis Desktop Manager,也很好用！</p>
			<p>官网下载比较困难，对于windows和Mac收费，这里推荐使用我收藏的安装文件安装</p>
			<p><strong>Mac端链接：</strong><a target="_blank" href="https://pan.baidu.com/s/1Z1i22OhfSMh3e4-3E5Q5WA"><strong>链接: https://pan.baidu.com/s/1Z1i22OhfSMh3e4-3E5Q5WA 提取码: 8pd6</strong></a></p>
			<p><strong>Windows端链接：</strong><a target="_blank" href="https://pan.baidu.com/s/1Z1i22OhfSMh3e4-3E5Q5WA"><strong>链接: https://pan.baidu.com/s/1CbHIXdmPuYuEBfk7rbCjRw 提取码: xkak</strong></a></p>
			<h2 class="mt10">参考：Redis Config参考配置含义，推荐链接</h2>
			<p><strong>官网Config：</strong><a target="_blank" href="https://redis.io/topics/config"><strong>https://redis.io/topics/config</strong></a></p>
			<p><strong>菜鸟教程：</strong><a target="_blank" href="http://www.runoob.com/redis/redis-conf.html"><strong>http://www.runoob.com/redis/redis-conf.html</strong></a></p>
			<h2 class="mt30">三：Node.js服务部署</h2>
			<h3 class="mt30">一：下载项目文件</h3>
<pre><code class="language-javascript">
git clone https://github.com/wangweianger/zanePerfor.git
</code></pre>
			<h3 class="mt30">二：安装依赖</h3>
<pre><code class="language-javascript">
// 查看node版本 node版本需要 >=8.0.0	
node -v
// 安装依赖
npm install
</code></pre>
			<p>如果你的node版本低于8.0.0，请升级</p>
			<p></p>推荐nvm安装node,Linux安装可参考 <a target="_blank" href="https://blog.seosiwei.com/detail/3">LINUX系统安装nvm 快速搭建Nodejs开发环境</a></p>
			<h3 class="mt30">三：配置项目Config</h3>
			<p class="mt20"><strong>配置项目端口和Host (本地开发默认即可)</strong></p>
<pre><code class="language-javascript">
config.cluster = {
	listen: {
		port: 7001,
		hostname: '127.0.0.1',
		ip: address.ip(),
	},
};
</code></pre>
			<p class="mt20"><strong>配置Redis Config（本地开发默认即可）</strong></p>
<pre><code class="language-javascript">
config.redis = {
	client: {
		port: 6379, // Redis port
		host: '127.0.0.1', // Redis host
		password: '',
		db: 0,
	},
};
</code></pre>
			<p class="mt20"><strong>配置Mongodb服务（本地开发默认即可）</strong></p>
<pre><code class="language-javascript">
const dbclients = {
	db3: {
		url: 'mongodb://127.0.0.1:27019/performance',
		options: {
			poolSize: 20,
		},
	},
};
</code></pre>
		<p class="mt20"><a href="/performance/configs.html"><strong>项目各配置项含义参考说明</strong></a></p>

		<h3 class="mt30">四：启动服务</h3>
<pre><code class="language-javascript">
// 本地开发
npm run dev

// 生产环境
npm run build
</code></pre>
			<h2 class="mt30">四：登录后台创建应用</h2>
			<h3 class="mt30">一：浏览器打开启动好的应用链接：http://127.0.0.1:7001 </h3>
			<h3 class="mt30">如果你部署成功会看到如下登录界面</h3>
			<div class="block mt10"><img class="big-img w-100" src="https://img.allpyra.com/c322d53a-760a-4e0f-80cc-f0b288f103ac.png"></div>
			<h3 class="mt30">注册账号（系统默认admin为管理员，其他账号全是普通用户）</h3>
			<h3 class="mt30">注册号之后会自动登录系统，点击添加应用，请选择你的应用类型（这里分为WEB 和 微信小程序两种类型应用）</h3>
			<div class="block mt10"><img class="big-img w-100" src="https://img.allpyra.com/df4e7d33-e173-4c22-ad78-1c9a12bbc64e.png"></div>
			<h3 class="mt30">填写应用名称和应用域名</h3>
			<div class="block mt10"><img class="big-img w-100" src="https://img.allpyra.com/d7b20078-7b97-4a32-9c12-f713c0bf008f.png"></div>
			
			<h2 class="mt30">五：下载SDK并进行数据的上报</h2>
			<h3 class="mt30">以上步骤完成你会看到如下的部署配置</h3>
			<div class="block mt10"><img class="big-img w-100" src="https://img.allpyra.com/2ca09e5f-5991-4c63-89bf-204e17f532a2.png"></div>
			<h3 class="mt30">SDK使用文档</h3>
			<h3 class="mt20">WEB端SDK及其使用文档：<a target="_blank" href="https://github.com/wangweianger/web-report-sdk">https://github.com/wangweianger/web-report-sdk</a></h3>
			<h3 class="mt20">小程序端SDK及其使用文档：<a target="_blank" href="https://github.com/wangweianger/wx-report-sdk">https://github.com/wangweianger/wx-report-sdk</a></h3>
			<h3 class="mt30">多页面部署案例：</h3>
<pre><code class="language-javascript">
// 头部引入sdk脚本
<\/script src="/js/performance-report-default.min.js"><\/script>
<\script>
	Performance({
		domain: 'http://127.0.0.1:7001/api/v1/report/web',
		add: {
			// 建好应用的appId
			appId: 'xxxxxxxxxxxxxx'
		}
	})
<\/script>
</code></pre>
			<h3 class="mt30">单页面部署案例：</h3>
			<h3 class="mt30">一：项目下新建 performance.js 文件，文件内容如下</h3>
<pre><code class="language-javascript">
const Performance = require('common/js/performance-report.min')
try{
	Performance({
		domain:'https://127.0.0.1:7001/api/v1/report/web',
		add:{
			// 建好应用的appId
			appId: 'xxxxxxxxxxxxxx'
		}
	})
} catch (e) {}
</code></pre>
			<h3 class="mt30">一：项目main.js入口文件顶部引入SDK插件</h3>
<pre><code class="language-javascript">
// main.js 单页面入口文件
// 引入jdk
require('./performance')
// 其他配置项
import Vue from 'vue'
import App from './app'
import VueRouter from 'vue-router'
import routes from './router'
import filter from './filter'
......
</code></pre>
			<h3 class="mt30">三：webpack配置加入性能SDK</h3>
<pre><code class="language-javascript">
// 入口配置
entry: {
	performance:path.resolve(__dirname, '../src/performance.js'),
	// 其他配置项
	...
},
</code></pre>

			<h2 class="mt30">六：大功告成，开始第一次的试用吧。</h2>
			<h3 class="mt30">其他说明：新建应用后，第一次需要给用户分配权限才会显示应用</h3>
			<div class="block mt10"><img class="big-img w-100" src="https://img.allpyra.com/a0521770-6462-4a83-a66b-b27bd21af38c.png"></div>
			
		</div>
	</div>
	<script>
		var href = location.href;
		var liobjs = $('.side').find('div')
		for (var i = 0, len = liobjs.length; i < len; i++) {
			var attrr = $(liobjs[i]).attr('data-mark')
			if (href.indexOf(attrr) != -1) {
				liobjs.removeClass('active')
				$(liobjs[i]).addClass('active')
			}
		}
	</script>
</body>
</html>